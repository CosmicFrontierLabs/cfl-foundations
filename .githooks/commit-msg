#!/bin/bash
# Commit-msg hook to reject commits with AI attribution mentions
#
# This repo's policy: Users are responsible for the code they direct agents to commit.
# Attribution to AI assistants is not appropriate - you prompted it, you own it.

COMMIT_MSG_FILE="$1"
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

# Check for AI attribution patterns - claude.com links, @claude, co-authored-by
if echo "$COMMIT_MSG" | grep -iE "(claude\.com|@claude|co-authored-by.*claude|generated.*with.*claude|created.*with.*claude)" > /dev/null 2>&1; then
    echo "╔════════════════════════════════════════════════════════════════════╗"
    echo "║  ❌ AI ATTRIBUTION DETECTED IN COMMIT MESSAGE                      ║"
    echo "╠════════════════════════════════════════════════════════════════════╣"
    echo "║                                                                    ║"
    echo "║  This repository does not include AI attribution in commits.      ║"
    echo "║                                                                    ║"
    echo "║  Remember: YOU are responsible for code you direct agents to      ║"
    echo "║  write. You prompted it, you reviewed it, you commit it.          ║"
    echo "║  Own your work, beratna.                                          ║"
    echo "║                                                                    ║"
    echo "║  Please remove references to:                                     ║"
    echo "║    • Claude / Anthropic                                           ║"
    echo "║    • Co-Authored-By: Claude                                       ║"
    echo "║    • Generated with Claude / Created with Claude Code             ║"
    echo "║                                                                    ║"
    echo "╚════════════════════════════════════════════════════════════════════╝"
    exit 1
fi

exit 0
